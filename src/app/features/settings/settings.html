<div class="flex h-full bg-gnome-bg text-gnome-text overflow-hidden">
  <aside class="w-64 border-r border-gnome-border bg-gnome-surface/50 flex flex-col p-4 gap-2">
    @for (item of menuItems(); track item.id) {
      <button
        (click)="setSection(item.id)"
        [class.bg-gnome-blue]="activeSection() === item.id"
        [class.text-white]="activeSection() === item.id"
        [class.hover:bg-gnome-blue/10]="activeSection() !== item.id"
        class="cursor-pointer flex items-center gap-3 px-4 py-2 rounded-lg transition-colors text-sm font-medium"
      >
        <i [class]="item.icon + ' w-5'"></i> {{ item.label }}
      </button>
    }

    <div class="mt-auto border-t border-gnome-border pt-4">
      <button
        (click)="setSection('about')"
        [class.bg-gnome-blue]="activeSection() === 'about'"
        [class.text-white]="activeSection() === 'about'"
        [class.hover:bg-gnome-blue/10]="activeSection() !== 'about'"
        class="flex items-center gap-3 px-4 py-2 rounded-lg transition-colors text-sm font-medium w-full text-left cursor-pointer"
      >
        <i class="fas fa-info-circle w-5"></i> {{ lang.t().settings.about.title }}
      </button>
    </div>
  </aside>

  <main class="flex-1 overflow-y-auto p-8 custom-scrollbar selection:bg-gnome-blue/30">
    <div class="max-w-2xl mx-auto">
      @if (activeSection() === 'appearance') {
        <h2 class="text-3xl font-bold mb-8">{{ lang.t().settings.appearance.title }}</h2>
        <div class="space-y-10">
          <section>
            <h3 class="text-xs uppercase tracking-[0.2em] text-gnome-text-secondary mb-4 font-bold">
              {{ lang.t().settings.appearance.colorScheme }}
            </h3>
            <div
              class="grid grid-cols-2 gap-6 bg-gnome-surface p-6 rounded-2xl border border-gnome-border"
            >
              <button
                (click)="theme.setDark(false)"
                class="flex flex-col items-center gap-3 p-4 rounded-xl transition-all duration-200 group cursor-pointer"
                [class.ring-4]="!theme.isDarkMode()"
                [class.ring-gnome-blue]="!theme.isDarkMode()"
                [class.bg-gnome-header]="!theme.isDarkMode()"
              >
                <div
                  class="w-full h-40 bg-zinc-100 rounded-lg border border-black/5 shadow-sm overflow-hidden relative"
                >
                  <div class="absolute top-0 left-0 right-0 h-3 bg-zinc-200"></div>
                  <div
                    class="absolute bottom-2 left-1/2 -translate-x-1/2 w-10 h-2 bg-zinc-300 rounded-full"
                  ></div>
                </div>
                <span class="text-sm font-semibold">{{ lang.t().settings.appearance.light }}</span>
              </button>
              <button
                (click)="theme.setDark(true)"
                class="flex flex-col items-center gap-3 p-4 rounded-xl transition-all duration-200 group cursor-pointer"
                [class.ring-4]="theme.isDarkMode()"
                [class.ring-gnome-blue]="theme.isDarkMode()"
                [class.bg-gnome-header]="theme.isDarkMode()"
              >
                <div
                  class="w-full h-40 bg-zinc-900 rounded-lg border border-white/5 shadow-sm overflow-hidden relative"
                >
                  <div class="absolute top-0 left-0 right-0 h-3 bg-zinc-800"></div>
                  <div
                    class="absolute bottom-2 left-1/2 -translate-x-1/2 w-10 h-2 bg-zinc-700 rounded-full"
                  ></div>
                </div>
                <span class="text-sm font-semibold">{{ lang.t().settings.appearance.dark }}</span>
              </button>
            </div>
          </section>

          <section>
            <h3 class="text-xs uppercase tracking-[0.2em] text-gnome-text-secondary mb-4 font-bold">
              {{ lang.t().settings.appearance.wallpaper }}
            </h3>
            <div class="flex flex-col">
              <h4 class="text-xs ml-2 tracking-[0.2em] text-gnome-text-secondary mb-4 font-bold">
                {{ lang.t().settings.appearance.static }}
              </h4>
              <div class="grid grid-cols-2 gap-4">
                @for (wp of wallpapers; track wp) {
                  <button
                    (click)="settings.setWallpaper(wp)"
                    class="group aspect-video rounded-xl overflow-hidden border-4 transition-all duration-300 relative shadow-sm cursor-pointer"
                    [class.border-gnome-blue]="settings.wallpaper() === wp"
                    [class.border-transparent]="settings.wallpaper() !== wp"
                  >
                    <img
                      [src]="wp"
                      class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                    />
                    @if (settings.wallpaper() === wp) {
                      <div
                        class="absolute inset-0 bg-gnome-blue/10 flex items-center justify-center"
                      >
                        <i class="fas fa-check-circle text-white text-2xl drop-shadow-md"></i>
                      </div>
                    }
                  </button>
                }
              </div>
              <h4
                class="text-xs mt-4 ml-2 tracking-[0.2em] text-gnome-text-secondary mb-4 font-bold"
              >
                {{ lang.t().settings.appearance.animated }}
              </h4>
              <div class="grid grid-cols-2 gap-4">
                @for (wp of wallpapersAnimated; track wp) {
                  <button
                    (click)="settings.setWallpaper(wp)"
                    class="group aspect-video rounded-xl overflow-hidden border-4 transition-all duration-300 relative shadow-sm cursor-pointer"
                    [class.border-gnome-blue]="settings.wallpaper() === wp"
                    [class.border-transparent]="settings.wallpaper() !== wp"
                  >
                    <video
                      autoplay
                      loop
                      muted
                      playsinline
                      class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                    >
                      <source [src]="wp" type="video/mp4" />
                    </video>
                    @if (settings.wallpaper() === wp) {
                      <div
                        class="absolute inset-0 bg-gnome-blue/10 flex items-center justify-center"
                      >
                        <i class="fas fa-check-circle text-white text-2xl drop-shadow-md"></i>
                      </div>
                    }
                  </button>
                }
              </div>
            </div>
          </section>
        </div>
      }

      @if (activeSection() === 'desktop') {
        <h2 class="text-3xl font-bold mb-8">{{ lang.t().settings.desktop.title }}</h2>
        <div class="space-y-6">
          <div
            class="bg-gnome-surface rounded-xl border border-gnome-border divide-y divide-gnome-border"
          >
            <div class="p-4 flex items-center justify-between">
              <div>
                <div class="font-medium">{{ lang.t().settings.desktop.autoHideDock }}</div>
                <div class="text-sm text-gnome-text-secondary">
                  {{ lang.t().settings.desktop.autoHideDockDesc }}
                </div>
              </div>
              <button
                (click)="settings.toggleAutoHideDock()"
                class="w-12 h-6 rounded-full relative transition-colors duration-200 p-1 cursor-pointer"
                [class.bg-gnome-blue]="settings.autoHideDock()"
                [class.bg-zinc-400]="!settings.autoHideDock()"
              >
                <div
                  class="w-4 h-4 bg-white rounded-full transition-transform duration-200 shadow-sm"
                  [class.translate-x-6]="settings.autoHideDock()"
                  [class.translate-x-0]="!settings.autoHideDock()"
                ></div>
              </button>
            </div>
            <div class="p-4 flex items-center justify-between">
              <div>
                <div class="font-medium">{{ lang.t().settings.desktop.iconSize }}</div>
                <div class="text-sm text-gnome-text-secondary">
                  {{ lang.t().settings.desktop.iconSizeDesc }}
                </div>
              </div>
              <div class="flex bg-gnome-bg border border-gnome-border rounded-lg p-1 gap-1">
                @for (size of [32, 48, 64]; track size) {
                  <button
                    (click)="settings.setDockSize(size)"
                    [class.bg-gnome-blue]="settings.dockSize() === size"
                    [class.text-white]="settings.dockSize() === size"
                    [class.hover:bg-gnome-blue/10]="settings.dockSize() !== size"
                    class="px-3 py-1 rounded text-xs font-bold transition-colors cursor-pointer"
                  >
                    {{ size }}px
                  </button>
                }
              </div>
            </div>
            <div class="p-4 flex items-center justify-between">
              <div>
                <div class="font-medium">{{ lang.t().settings.desktop.desktopItemsSize }}</div>
                <div class="text-sm text-gnome-text-secondary">
                  {{ lang.t().settings.desktop.desktopItemsSizeDesc }}
                </div>
              </div>
              <div class="flex bg-gnome-bg border border-gnome-border rounded-lg p-1 gap-1">
                @for (size of [40, 50, 60, 70]; track size) {
                  <button
                    (click)="settings.setDesktopSize(size)"
                    [class.bg-gnome-blue]="settings.desktopSize() === size"
                    [class.text-white]="settings.desktopSize() === size"
                    [class.hover:bg-gnome-blue/10]="settings.desktopSize() !== size"
                    class="px-3 py-1 rounded text-xs font-bold transition-colors cursor-pointer"
                  >
                    {{ size }}px
                  </button>
                }
              </div>
            </div>
          </div>
        </div>
      }

      @if (activeSection() === 'sound') {
        <h2 class="text-3xl font-bold mb-8">{{ lang.t().settings.sound.title }}</h2>
        <div class="space-y-6">
          <div
            class="bg-gnome-surface rounded-xl border border-gnome-border divide-y divide-gnome-border"
          >
            <div class="p-4 flex items-center justify-between">
              <div>
                <div class="font-medium">{{ lang.t().settings.sound.systemSounds }}</div>
                <div class="text-sm text-gnome-text-secondary">
                  {{ lang.t().settings.sound.systemSoundsDesc }}
                </div>
              </div>
              <button
                (click)="settings.toggleSystemSounds()"
                class="w-12 h-6 rounded-full relative transition-colors duration-200 p-1 cursor-pointer"
                [class.bg-gnome-blue]="!settings.systemMuted()"
                [class.bg-zinc-400]="settings.systemMuted()"
              >
                <div
                  class="w-4 h-4 bg-white rounded-full transition-transform duration-200 shadow-sm"
                  [class.translate-x-6]="!settings.systemMuted()"
                  [class.translate-x-0]="settings.systemMuted()"
                ></div>
              </button>
            </div>
          </div>
        </div>
      }

      @if (activeSection() === 'language') {
        <h2 class="text-3xl font-bold mb-8">{{ lang.t().settings.language.title }}</h2>
        <div class="space-y-6">
          <div
            class="bg-gnome-surface rounded-xl border border-gnome-border divide-y divide-gnome-border"
          >
            <button
              (click)="lang.setLanguage('pt')"
              class="w-full p-4 flex items-center justify-between hover:bg-gnome-text/5 transition-colors text-left outline-none cursor-pointer"
            >
              <div class="flex items-center gap-4">
                <span class="text-2xl">ðŸ‡§ðŸ‡·</span>
                <div>
                  <div class="font-medium">{{ lang.t().settings.language.portuguese }}</div>
                  <div class="text-xs text-gnome-text-secondary">
                    {{ lang.t().settings.language.brazil }}
                  </div>
                </div>
              </div>
              @if (lang.currentLang() === 'pt') {
                <i class="fas fa-check text-gnome-blue"></i>
              }
            </button>
            <button
              (click)="lang.setLanguage('en')"
              class="w-full p-4 flex items-center justify-between hover:bg-gnome-text/5 transition-colors text-left outline-none cursor-pointer"
            >
              <div class="flex items-center gap-4">
                <span class="text-2xl">ðŸ‡ºðŸ‡¸</span>
                <div>
                  <div class="font-medium">{{ lang.t().settings.language.english }}</div>
                  <div class="text-xs text-gnome-text-secondary">
                    {{ lang.t().settings.language.unitedStates }}
                  </div>
                </div>
              </div>
              @if (lang.currentLang() === 'en') {
                <i class="fas fa-check text-gnome-blue"></i>
              }
            </button>
          </div>
          <div class="px-2 flex gap-2 items-start text-left opacity-70">
            <i class="fas fa-info-circle text-[10px] text-gnome-blue"></i>
            <p class="text-[10px] text-gnome-text-secondary leading-tight">
              {{ lang.t().settings.language.languageChangeNote }}
            </p>
          </div>
        </div>
      }

      @if (activeSection() === 'system') {
        <h2 class="text-3xl font-bold mb-8">{{ lang.t().settings.system.title }}</h2>
        <div class="space-y-6">
          <div
            class="bg-gnome-surface rounded-xl border border-gnome-border divide-y divide-gnome-border"
          >
            <div class="p-4 flex items-center justify-between">
              <div>
                <div class="font-medium">{{ lang.t().settings.system.systemTips }}</div>
                <div class="text-sm text-gnome-text-secondary">
                  {{ lang.t().settings.system.systemTipsDesc }}
                </div>
              </div>
              <button
                (click)="settings.toggleSystemTips()"
                class="w-12 h-6 rounded-full relative transition-colors duration-200 p-1 cursor-pointer"
                [class.bg-gnome-blue]="settings.tipsEnabled()"
                [class.bg-zinc-400]="!settings.tipsEnabled()"
              >
                <div
                  class="w-4 h-4 bg-white rounded-full transition-transform duration-200 shadow-sm"
                  [class.translate-x-6]="settings.tipsEnabled()"
                  [class.translate-x-0]="!settings.tipsEnabled()"
                ></div>
              </button>
            </div>
          </div>
        </div>
      }

      @if (activeSection() === 'about') {
        <div class="flex flex-col items-center text-center pb-8">
          <div
            class="w-24 h-24 bg-white rounded-3xl flex items-center justify-center shadow-2xl mb-6"
          >
            <span class="text-zinc-950 text-5xl font-black italic">C</span>
          </div>
          <h2 class="text-3xl font-bold mb-2">Cai_OS</h2>
          <p class="text-gnome-text-secondary mb-8">
            {{ lang.t().settings.about.version }} 1.0.0 (Rolling Release)
          </p>
          <div
            class="p-4 text-center w-full bg-gnome-surface rounded-xl border border-gnome-border overflow-hidden"
          >
            <span class="font-medium"> "{{ lang.t().settings.about.description }}" </span>
          </div>
          <div
            class="mt-8 w-full bg-gnome-surface rounded-xl border border-gnome-border text-left overflow-hidden"
          >
            <div class="p-4 flex justify-between border-b border-gnome-border">
              <span class="text-gnome-text-secondary">{{
                lang.t().settings.about.systemName
              }}</span>
              <span class="font-medium">Cai_OS</span>
            </div>
            <div class="p-4 flex justify-between">
              <span class="text-gnome-text-secondary">{{ lang.t().settings.about.interface }}</span>
              <span class="font-medium">VWE UI</span>
            </div>
          </div>

          <div class="w-full mt-8 mb-2">
            <div
              class="text-[10px] text-gnome-text-secondary uppercase font-black tracking-widest mb-2 ml-1 text-left"
            >
              {{ lang.t().settings.about.hardwareInfo }}
            </div>

            <div
              class="bg-gnome-surface rounded-xl border border-gnome-border overflow-hidden divide-y divide-gnome-border/30"
            >
              <div class="flex items-center justify-between p-4 border-b border-gnome-border">
                <span class="text-xs text-gnome-text-secondary font-medium flex items-center gap-2">
                  <i class="fas fa-microchip text-gnome-blue opacity-80"></i>
                  {{ lang.t().settings.about.cpu }}
                </span>
                <span class="text-xs text-gnome-text"
                  >{{ systemInfo.cpu }} {{ this.lang.t().settings.about.cores }}</span
                >
              </div>

              <div class="flex items-center justify-between p-4 border-b border-gnome-border">
                <span class="text-xs text-gnome-text-secondary font-medium flex items-center gap-2">
                  <i class="fas fa-expand text-gnome-blue opacity-80"></i>
                  {{ lang.t().settings.about.gpu }}
                </span>
                <span class="text-xs text-gnome-text">Web GPU</span>
              </div>

              <div class="flex items-center justify-between p-4 border-b border-gnome-border">
                <span class="text-xs text-gnome-text-secondary font-medium flex items-center gap-2">
                  <i class="fas fa-memory text-gnome-blue opacity-80"></i>
                  {{ lang.t().settings.about.ram }}
                </span>
                <span class="text-xs text-gnome-text">{{ systemInfo.ram }}</span>
              </div>

              <div class="flex items-center justify-between p-4">
                <span class="text-xs text-gnome-text-secondary font-medium flex items-center gap-2">
                  <i class="fas fa-display text-gnome-blue opacity-80"></i>
                  {{ lang.t().settings.about.display }}
                </span>
                <span class="text-xs text-gnome-text">{{ systemInfo.resolution }}</span>
              </div>
            </div>
          </div>

          <div class="w-full mt-3 px-2 flex gap-2 items-start text-left opacity-70">
            <i class="fas fa-info-circle text-[10px] mt-1/2 text-gnome-blue"></i>
            <p class="text-[10px] text-gnome-text-secondary leading-tight">
              {{ lang.t().settings.about.privacyWarning }}
            </p>
          </div>
        </div>
      }
    </div>
  </main>
</div>
